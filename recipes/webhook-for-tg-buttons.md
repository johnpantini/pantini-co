# Webhook –¥–ª—è –∫–Ω–æ–ø–æ–∫ TG

–í —ç—Ç–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Å—ã–ª–∫–∏ webhook –¥–ª—è –±–æ—Ç–∞ –≤ Telegram, –≥–¥–µ –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ **ppp**.

## –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∫–Ω–æ–ø–∫–∞–º–∏

{% hint style="info" %}
–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö –æ–ø–æ–≤–µ—â–µ–Ω–∏–π –æ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—É–∑–∞—Ö.
{% endhint %}

–î–ª—è –ø—Ä–∏–º–µ—Ä–∞ —Ä–∞–∑–º–µ—Å—Ç–∏–º –æ–¥–Ω—É –∫–Ω–æ–ø–∫—É –∏ –æ–¥–Ω—É —Å—Å—ã–ª–∫—É –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ —Å—Ç–æ–ø-—Ç–æ—Ä–≥–∞—Ö –≤ –æ–¥–∏–Ω —Ä—è–¥. –°—Å—ã–ª–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ—Ç–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–π (–¢–ò) –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

–ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç —Ç–∏–∫–µ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤ –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤–∏–¥–∂–µ—Ç –∑–∞—è–≤–∫–∏ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¢–ò —Å –ø–µ—Ä–≤–æ–π –≥—Ä—É–ø–ø–æ–π. –ü—Ä–∏–º–µ—Ä–Ω—ã–π –≤–∏–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥–µ—Ç —Ç–∞–∫–∏–º:

![](<../.gitbook/assets/image (348).png>)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–π –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—É–∑ –≤ **ppp**. –£ –≤–∞—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ä–∞–Ω–µ–µ –¥–æ–±–∞–≤–ª–µ–Ω –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞. –î–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

#### –î–ª—è —Å–µ—Ä–≤–∏—Å–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—É–∑ SPBEX

```javascript
/**
 * –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—É–∑–µ.
 *
 * @param {string} isin - ISIN –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
 * @param {string} ticker - –¢–∏–∫–µ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
 * @param {string} name - –ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
 * @param {string} currency - –í–∞–ª—é—Ç–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
 * @param {string} date - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–∏—Ä–∂–∏.
 * @param {string} url - –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Å–∞–π—Ç–µ –±–∏—Ä–∂–∏.
 * @param {string} start - –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—É–∑—ã, MSK.
 * @param {string} finish - –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—É–∑—ã, MSK.
 */
return {
  text: `‚ÄºÔ∏è‚è∏ –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤ (SPBEX)
${'$'}${ticker || isin}
<b>${name}, ${isin}</b>
üïí ${start} - ${finish}

<a href="${encodeURIComponent(url)}">–°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Ç–æ—Ä–≥–æ–≤</a>
`,
  options: ticker ? {
    reply_markup: JSON.stringify({
      inline_keyboard: [
        [
          {
            text: 'üü°',
            callback_data: JSON.stringify({
              e: 'ticker',
              t: ticker
            })
          },
          {
            text: `Open ${ticker} with Tinkoff`,
            url: `https://www.tinkoff.ru/invest/stocks/${ticker}`
          }
        ]
      ]
    })
  } : {}
};
```

#### –î–ª—è —Å–µ—Ä–≤–∏—Å–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—É–∑ NYSE/NASDAQ

```javascript
/**
 * –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—É–∑–µ.
 *
 * @param {string} halt_date - –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—É–∑—ã (MM/DD/YYYY).
 * @param {string} halt_time - –í—Ä–µ–º—è —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—É–∑—ã (Eastern Time).
 * @param {string} symbol - –¢–∏–∫–µ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
 * @param {string} name - –ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
 * @param {string} market - –ü–ª–æ—â–∞–¥–∫–∞ –ª–∏—Å—Ç–∏–Ω–≥–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
 * @param {string} reason_code - –ö–æ–¥ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—É–∑—ã.
 * @param {string} pause_threshold_price - –ò–Ω–¥–∏–∫–∞—Ç–∏–≤–Ω–∞—è –ø–æ—Ä–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—É–∑—ã.
 * @param {string} resumption_date - –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—É–∑—ã (MM/DD/YYYY).
 * @param {string} resumption_quote_time - –í—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–Ω–∏–≥–∏ –∑–∞—è–≤–æ–∫ (Eastern Time).
 * @param {string} resumption_trade_time - –í—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Ç–æ—Ä–≥–æ–≤ (Eastern Time).
 */
const mappings = {
  T1: 'Halt - News Pending. –û–∂–∏–¥–∞—é—Ç—Å—è –Ω–æ–≤–æ—Å—Ç–∏.',
  T2: 'Halt - News Released. –≠–º–∏—Ç–µ–Ω—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –æ –¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ–º —Ä–∞—Å–∫—Ä—ã—Ç–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (SEC Regulation FD).',
  T5: 'Single Stock Trading Pause in Effect. –¶–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –±–æ–ª–µ–µ, —á–µ–º –Ω–∞ 10% (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ) –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç.',
  T6: 'Halt - Extraordinary Market Activity. –ù–µ–æ–±—ã—á–Ω–∞—è —Ä—ã–Ω–æ—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ NASDAQ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã (–∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Ü–µ–Ω—ã) —Å –∫–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º, —Å —Ä–µ–ø–æ—Ä—Ç–∏–Ω–≥–æ–º –≤ –ª–µ–Ω—Ç—É —Å–¥–µ–ª–æ–∫, –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.',
  T8: 'Halt - Exchange-Traded-Fund (ETF). –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤ ETF, –µ—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã –≤ –±–∞–∑–æ–≤—ã—Ö –∞–∫—Ç–∏–≤–∞—Ö.',
  T12: 'Halt - Additional Information Requested by NASDAQ. –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ NASDAQ –æ–∂–∏–¥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (—ç–º–∏—Ç–µ–Ω—Ç—É –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ—Ç –¥–æ–ª–∂–µ–Ω –¥–∞—Ç—å –æ—Ç–≤–µ—Ç).',
  H4: 'Halt - Non-compliance. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ª–∏—Å—Ç–∏–Ω–≥–∞ NASDAQ.',
  H9: 'Halt - Not Current. –ö–æ–º–ø–∞–Ω–∏—è –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –≤ —Ä–µ–≥—É–ª–∏—Ä—É—é—â–∏–µ –æ—Ä–≥–∞–Ω—ã (SEC).',
  H10: 'Halt - SEC Trading Suspension. SEC –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∞ —Ç–æ—Ä–≥–∏ –Ω–∞ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è.',
  H11: 'Halt - Regulatory Concern. –¢–æ—Ä–≥–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –¥—Ä—É–≥–æ–º —Ä—ã–Ω–æ—á–Ω–æ–º —Ü–µ–Ω—Ç—Ä–µ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é —Ä–µ–≥—É–ª–∏—Ä—É—é—â–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤. –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–µ—Ç –∏—Å—á–∏—Å–ª—è—Ç—å—Å—è –¥–Ω—è–º–∏ –∏–ª–∏ –Ω–µ–¥–µ–ª—è–º–∏.',
  O1: 'Operations Halt, Contact Market Operations. –ü—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Ä–∫–µ—Ç-–º–µ–π–∫–∏–Ω–≥–æ–º (–ø—Ä–æ–±–ª–µ–º—ã —Å –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞—è–≤–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ç–æ—Ä–≥–æ–≤).',
  IPO1: 'HIPO Issue not yet Trading. –ü—Ä–æ–±–ª–µ–º—ã –Ω–∞ —Ç–æ—Ä–≥–∞—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –≤—ã—Ö–æ–¥—è—â–∏—Ö –Ω–∞ IPO (–≤ –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å —Ç–æ—Ä–≥–æ–≤). –¢–æ—Ä–≥–∏ IPO –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –ø–æ–∑–∂–µ –Ω–∞—á–∞–ª–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤.',
  M1: 'Corporate Action. –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ.',
  M2: ' Quotation Not Available. –ù–µ—Ç –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É.',
  LUDP: 'Volatility Trading Pause. –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—É–∑–∞ –≤ —Å–≤—è–∑–∏ —Å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å—é.',
  LUDS: 'Volatility Trading Pause - Straddle Condition. –ü–∞—É–∑–∞, —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –≤—ã—Ö–æ–¥–æ–º –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ bid –∏–ª–∏ ask –∑–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–µ–ª—ã.',
  MWC1: 'Market Wide Circuit Breaker Halt. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤ –∏–∑-–∑–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç–æ–ø-–∑–∞—â–∏—Ç—ã —Ä—ã–Ω–∫–∞.',
  MWC2: 'Market Wide Circuit Breaker Halt. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤ –∏–∑-–∑–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç–æ–ø-–∑–∞—â–∏—Ç—ã —Ä—ã–Ω–∫–∞.',
  MWC3: 'Market Wide Circuit Breaker Halt. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤ –∏–∑-–∑–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç–æ–ø-–∑–∞—â–∏—Ç—ã —Ä—ã–Ω–∫–∞.',
  MWC0: 'Market Wide Circuit Breaker Halt. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤ –∏–∑-–∑–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç–æ–ø-–∑–∞—â–∏—Ç—ã —Ä—ã–Ω–∫–∞.',
  T3: 'News and Resumption Times. –≠–º–∏—Ç–µ–Ω—Ç –∑–∞–∫–æ–Ω—á–∏–ª –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π, –≤—Å–∫–æ—Ä–µ –æ–∂–∏–¥–∞—é—Ç—Å—è —Ç–æ—Ä–≥–∏.',
  T7: 'Single Stock Trading Pause/Quotation-Only Period. –°–º. –∫–æ–¥ T5.',
  R4: 'Qualifications Issues Reviewed/Resolved; Quotations/Trading to Resume. –°–º. –∫–æ–¥ H4.',
  R9: 'Filing Requirements Satisfied/Resolved; Quotations/Trading To Resume. –°–º. –∫–æ–¥ H9.',
  C3: 'Issuer News Not Forthcoming; Quotations/Trading To Resume. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π –æ—Ç–º–µ–Ω–µ–Ω–∞. –°–º. –∫–æ–¥—ã T2 –∏ T3.',
  C4: 'Qualifications Halt Ended; Maintenance Requirements Met. –°–º. –∫–æ–¥—ã H4 –∏ R4.',
  C9: 'Qualifications Halt Concluded; Filings Met; Quotes/Trades To Resume. –°–º. –∫–æ–¥—ã H9 –∏ R9.',
  C11: 'Trade Halt Concluded By Other Regulatory Auth.; Quotes/Trades Resume. –°–º. –∫–æ–¥ H11.',
  R1: 'New Issue Available. –°–º. –∫–æ–¥ T1.',
  R2: 'Issue Available. –°–º. –∫–æ–¥ T2.',
  IPOQ: 'IPO security released for quotation. –î–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ –¥–µ–Ω—å IPO - –Ω–∞—á–∞–ª–æ –∫–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –¢–æ–ª—å–∫–æ NASDAQ.',
  IPOE: 'IPO security - positioning window extension. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –≤ –ø–µ—Ä–µ–∫—Ä—ë—Å—Ç–Ω–æ–π —Å–µ—Å—Å–∏–∏ NASDAQ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ –¥–µ–Ω—å IPO.',
  MWCQ: 'Market Wide Circuit Breaker Resumption. –°–Ω—è—Ç–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç–æ–ø-–∑–∞—â–∏—Ç—ã —Ä—ã–Ω–∫–∞.',
  M: 'Volatility Trading Pause. –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—É–∑–∞ –≤ —Å–≤—è–∑–∏ —Å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å—é.',
  D: 'Security deletion from NASDAQ / CQS. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —É–¥–∞–ª—ë–Ω —Å —Ç–æ—Ä–≥–æ–≤ (–¥–µ–ª–∏—Å—Ç–∏–Ω–≥).'
};
const formatDateTime = (dateString) => {
  const [date, timeZ] = new Date(`${dateString} GMT-8`)
    .toISOString()
    .split(/T/);
  const [y, m, d] = date.split(/-/);
  const [time] = timeZ.split(/\./);

  return `${d}.${m}.${y} ${time} MSK`;
};

let message = `‚ÄºÔ∏è‚è∏ –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤ (${market})
${'$'}${symbol}
<b>${name}</b>
üïí ${formatDateTime(`${halt_date} ${halt_time}`)}

`;

const description = mappings[reason_code];

if (description) message += `<b>–ö–æ–¥ ${reason_code}</b>: ${description}\n`;
else message += `<b>–û–∂–∏–¥–∞–Ω–∏–µ –∫–æ–¥–∞</b>\n`;

if (resumption_quote_time)
  message += `\n–û—Ç–∫—Ä—ã—Ç–∏–µ –∫–Ω–∏–≥–∏ –∑–∞—è–≤–æ–∫: ${formatDateTime(
    `${resumption_date} ${resumption_quote_time}`
  )}`;

if (resumption_trade_time)
  message += `\n–í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤: ${formatDateTime(
    `${resumption_date} ${resumption_trade_time}`
  )}`;

message +=
  '\n\n<a href="https://www.nasdaqtrader.com/trader.aspx?id=TradeHalts">–ö —Å–ø–∏—Å–∫—É —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—É–∑</a>';

return {
  text: message,
  options: symbol ? {
    reply_markup: JSON.stringify({
      inline_keyboard: [
        [
          {
            text: 'üü°',
            callback_data: JSON.stringify({
              e: 'ticker',
              t: symbol
            })
          },
          {
            text: `Open ${symbol} with Tinkoff`,
            url: `https://www.tinkoff.ru/invest/stocks/${symbol}`
          }
        ]
      ]
    })
  } : {}
};
```

–ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å —É –≤–∞—Å —É–∂–µ –±—ã–ª, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –Ω–∞–∂–∞—Ç–∏–µ–º –∫–Ω–æ–ø–∫–∏ **–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å**.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook –¥–ª—è –±–æ—Ç–∞

{% hint style="danger" %}
–ß—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ Pusher –≤ **ppp** [–ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏](pusher.md).
{% endhint %}

–î–ª—è —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞, –∞ —Ç–∞–∫–∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ **Pusher**, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ–¥ webhook –±—É–¥–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è.

–î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ **Pusher** –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **Pusher**, –∞ –±–æ—Ç **Onaryx**. –î–∞–ª–µ–µ –≤ ppp –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª —Å–æ —Å–ø–∏—Å–∫–æ–º –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫ HTTPS, –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –∫–Ω–æ–ø–∫–æ–π —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É.

**–ú–∞—Ä—à—Ä—É—Ç** —Å—Ç–æ–∏—Ç —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–µ–∫—Ä–µ—Ç–µ - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–æ–π. **HTTP-–º–µ—Ç–æ–¥** —É–∫–∞–∂–∏—Ç–µ –∫–∞–∫ POST. –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ - –ª—é–±–æ–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, **onaryxWebhook**. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:

{% hint style="danger" %}
–í 11 —Å—Ç—Ä–æ–∫–µ –ø–æ–º–µ–Ω—è–π—Ç–µ –∏–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Pusher –Ω–∞ –≤–∞—à–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ (–≤–Ω—É—Ç—Ä–∏ –æ–¥–∏–Ω–∞—Ä–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫).

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –≤ —Å—Ç—Ä–æ–∫–µ 55 –ø–æ–º–µ–Ω—è–π—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞ –Ω–∞ –≤–∞—à–µ.
{% endhint %}

```javascript
exports = function ({ query, headers, body }, response) {
  try {
    const payload = EJSON.parse(body.text());

    if (payload.callback_query) {
      const data = JSON.parse(payload.callback_query.data);

      try {
        if (data.e === 'ticker') {
          const pusherCredentials = [%#JSON.stringify(await (async () => {
            const api = await ctx.app.ppp.user.functions.findOne({collection:'apis'},{removed:{$not:{$eq:true}},type:'pusher',name:'Pusher'},{iv:1,appid:1,key:1,secret:1,cluster:1});

            return {
              appid: api.appid,
              key: api.key,
              secret: await ctx.app.ppp.crypto.decrypt(api.iv, api.secret),
              cluster: api.cluster
            };
          })())%];

          const timestamp = Math.floor(Date.now() / 1000);
          const pusherBody = JSON.stringify({
            name: 'ticker',
            channel: 'telegram',
            data: JSON.stringify({ t: data.t })
          });
          const crypto = require('crypto');
          const bodyMd5 = crypto
            .createHash('md5')
            .update(pusherBody)
            .digest('hex');

          let params = `auth_key=${pusherCredentials.key}&auth_timestamp=${timestamp}&auth_version=1.0&body_md5=${bodyMd5}`;
          const authSignature = utils.crypto.hmac(
            ['POST', `/apps/${pusherCredentials.appid}/events`, params].join(
              '\n'
            ),
            pusherCredentials.secret,
            'sha256',
            'hex'
          );

          params += `&auth_signature=${authSignature}`;

          context.http.post({
            url: `https://api-${pusherCredentials.cluster}.pusher.com/apps/${pusherCredentials.appid}/events?${params}`,
            body: pusherBody,
            headers: {
              'Content-Type': ['application/json']
            }
          });
        }
      } finally {
        const token = `[%#(await (async () => {
          const bot = await ctx.app.ppp.user.functions.findOne({collection:'bots'},{removed:{$not:{$eq:true}},name:'Onaryx'},{iv:1,token:1});

          return await ctx.app.ppp.crypto.decrypt(bot.iv, bot.token);
        })())%]`;

        context.http.get({
          url: `https://api.telegram.org/bot${token}/answerCallbackQuery?callback_query_id=${payload.callback_query.id}&text=üÜó`
        });
      }
    }

    response.setStatusCode(204);
  } catch (e) {
    response.setStatusCode(500);
  }
};
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω–µ—á–Ω—É—é –∏ —Å–Ω–æ–≤–∞ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ —Å–ø–∏—Å–∫—É. –í –∫–æ–ª–æ–Ω–∫–µ **–ö–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ MongoDB Realm** –±—É–¥–µ—Ç —Å—Å—ã–ª–∫–∞ –Ω–∞ **MongoDB Realm**, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –Ω–µ–π.

–ù–∞–π–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –≤ —Ä–∞–∑–¥–µ–ª–µ **Operation Type**, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–µ. –î–∞–ª–µ–µ –≤ **ppp** –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Å–µ–∫—Ü–∏—é **Webhook**, –≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –±–æ—Ç–∞. –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –±–æ—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ **Pusher**.

## –ü—Ä–∏–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¢–ò

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ [Tampermonkey](https://www.tampermonkey.net) –≤ –±—Ä–∞—É–∑–µ—Ä:

{% embed url="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=ru" %}

–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (–µ—Å–ª–∏ –∑–Ω–∞—á–∫–∞ –Ω–µ—Ç, —Ç–æ –Ω–∞–π–¥–∏—Ç–µ –∑–Ω–∞—á–æ–∫ –ø–∞–∑–∑–ª–∞ —Å–ø—Ä–∞–≤–∞ –æ—Ç –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏), –∑–∞—Ç–µ–º **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç...**:

![](<../.gitbook/assets/image (346).png>)

–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ (_–≤ –Ω—ë–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∏—Ç—å –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è, —Å–º. –Ω–∏–∂–µ_), –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å** –≤ –º–µ–Ω—é **–§–∞–π–ª**:

```javascript
// ==UserScript==
// @name         Tinkoff Terminal Pusher Integration
// @description  Tinkoff Terminal Pusher Integration
// @namespace    https://github.com/johnpantini/ppp
// @version      1.0
// @author       johnpantini
// @match        https://www.tinkoff.ru/terminal/*
// @icon         https://www.tinkoff.ru/favicon.ico
// @require      https://js.pusher.com/7.0/pusher.min.js
// @noframes
// @grant        none
// ==/UserScript==

(function () {
  function setWidgetTicker(widget, ticker) {
    if (widget && ticker) {
      const key = Object.keys(widget).find((key) =>
        key.startsWith('__reactFiber$')
      );

      if (key) {
        const internalInstance = widget[key];

        if (internalInstance) {
          const selectSymbol =
            internalInstance.return?.memoizedProps?.selectSymbol;

          selectSymbol?.(ticker.toUpperCase());
        }
      }
    }
  }

  const pusher = new Pusher('–í–∞—à Key (–∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) –≤ Pusher', {
    cluster: '–í–∞—à –∫–ª–∞—Å—Ç–µ—Ä –≤ Pusher'
  });
  const channel = pusher.subscribe('telegram');

  channel.bind('ticker', function (data) {
    setWidgetTicker(
      document
        .querySelector(
          '[data-widget-type="COMBINED_ORDER_WIDGET"] div[style*="color: rgb(255, 212, 80)"]'
        )
        .closest('[data-widget-type="COMBINED_ORDER_WIDGET"]'),
      data.t
    );
  });
})();

```

–í–º–µ—Å—Ç–æ **–í–∞—à Key (–∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)** **–≤ Pusher** –∏ **–í–∞—à –∫–ª–∞—Å—Ç–µ—Ä –≤ Pusher** –≤—Å—Ç–∞–≤—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ **Pusher** –≤ **ppp**. –û–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ —É–¥–∞–ª—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

–ù–∞ –≤–∫–ª–∞–¥–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

![](<../.gitbook/assets/image (351).png>)

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º.

### –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω—ã –∏ –æ–±—ä–µ–º–∞ –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ Tampermonkey

–≠—Ç–æ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–Ω—É, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º—É—é –ø–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ **ask** –±—É–º–∞–≥–∏ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ–º (–∑–∞–¥–∞—ë—Ç—Å—è –≤ 16-–π —Å—Ç—Ä–æ–∫–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0,3%). –û–±—ä–µ–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏—Å—Ö–æ–¥—è –∏–∑ –ø—Ä–µ–¥–µ–ª—å–Ω–æ–π —Å—É–º–º—ã, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–¥–∞—ë—Ç—Å—è –≤ 18-–π —Å—Ç—Ä–æ–∫–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000 –µ–¥–∏–Ω–∏—Ü –≤–∞–ª—é—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞).

```javascript
// ==UserScript==
// @name         Tinkoff Terminal Pusher Integration
// @description  Tinkoff Terminal Pusher Integration
// @namespace    https://github.com/johnpantini/ppp
// @version      1.0
// @author       johnpantini
// @match        https://www.tinkoff.ru/terminal/*
// @icon         https://www.tinkoff.ru/favicon.ico
// @require      https://js.pusher.com/7.0/pusher.min.js
// @noframes
// @grant        none
// ==/UserScript==

(function () {
  // %
  const SLIP = 0.3;
  // 1000$ or 1000 RUB or 1000 EUR etc.
  const MAX_AMOUNT = 1000;

  function getCook(cookiename) {
    const cookiestring = RegExp('' + cookiename + '[^;]+').exec(
      document.cookie
    );

    return decodeURIComponent(
      !!cookiestring ? cookiestring.toString().replace(/^[^=]+./, '') : ''
    );
  }

  function getPsid() {
    return getCook('psid');
  }

  const getInstrumentByTicker = (ticker) => {
    if (ticker === 'USDRUB') ticker = 'USD000UTSTOM';

    if (ticker === 'EURRUB') ticker = 'EUR_RUB__TOM';

    const instruments = window.store.getState().data.assets.instruments;

    for (const figi of Object.keys(instruments)) {
      if (instruments[figi].ticker === ticker) return instruments[figi];
    }
  };

  async function getOrderBook(instrument) {
    if (instrument) {
      const client = new WebSocket(
        `wss://api-invest.tinkoff.ru/mdstream-public/v1/md-stream/socket.io/?appName=invest_terminal&sessionId=${getPsid()}&EIO=3&transport=websocket`
      );

      return new Promise((resolve) => {
        client.addEventListener('error', () => resolve([]));

        client.onmessage = (e) => {
          if (/sid/.test(e.data))
            client.send(
              `42["orderbook:subscribe","{\\"depth\\":1,\\"symbols\\":[\\"${
                instrument.ticker + '_' + instrument.classCode
              }\\"]}"]`
            );
          else if (/orderbook/.test(e.data)) {
            client.close();
            resolve(
              JSON.parse(
                e.data
                  .replace('42[', '[')
                  .replace('"{', '{')
                  .replace('}"', '}')
                  .replaceAll(/\\/gi, '')
              )
            );
          }
        };
      });
    } else return Promise.resolve([]);
  }

  const findReactEventHandlers = function (dom) {
    const key = Object.keys(dom).find((key) => key.startsWith('__reactProps$'));

    if (!key) return null;

    return dom[key];
  };

  async function setWidgetTicker(widget, ticker) {
    if (widget && ticker) {
      const key = Object.keys(widget).find((key) =>
        key.startsWith('__reactFiber$')
      );

      if (key) {
        const internalInstance = widget[key];

        if (internalInstance) {
          const selectSymbol =
            internalInstance.return?.memoizedProps?.selectSymbol;

          if (selectSymbol) {
            selectSymbol(ticker.toUpperCase());

            const instrument = getInstrumentByTicker(ticker.toUpperCase());
            const orderbook = await getOrderBook(instrument);

            if (orderbook.length && SLIP > 0 && MAX_AMOUNT > 0) {
              let askPrice = orderbook[1]?.asks[0]?.[0] ?? 0;

              if (askPrice > 0) {
                const precision = instrument.minPriceIncrement
                  .toString()
                  .split('.')[1].length;

                askPrice = (askPrice + (askPrice * SLIP) / 100).toFixed(
                  precision
                );

                const leftInputHolder = widget.querySelector(
                  'div[class*="OrderForm-OrderForm-leftInput-"]'
                );
                const priceInput = leftInputHolder.querySelector('input');
                const rightInputHolder = leftInputHolder.nextElementSibling;
                const volumeInput = rightInputHolder.querySelector('input');

                if (priceInput && askPrice > 0) {
                  const reactHandlers = findReactEventHandlers(priceInput);

                  if (reactHandlers) {
                    reactHandlers.onChange({
                      target: { value: askPrice.toString() },
                      currentTarget: { value: askPrice.toString() }
                    });
                  }
                }

                if (volumeInput) {
                  const reactHandlers = findReactEventHandlers(volumeInput);
                  const amount = Math.floor(MAX_AMOUNT / askPrice);

                  if (reactHandlers) {
                    reactHandlers.onChange({
                      target: { value: amount.toString() },
                      currentTarget: { value: amount.toString() }
                    });
                  }
                }
              }
            }
          }
        }
      }
    }
  }

  const pusher = new Pusher('–í–∞—à Key (–∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) –≤ Pusher', {
    cluster: '–í–∞—à –∫–ª–∞—Å—Ç–µ—Ä –≤ Pusher'
  });
  const channel = pusher.subscribe('telegram');

  channel.bind('ticker', function (data) {
    void setWidgetTicker(
      document
        .querySelector(
          '[data-widget-type="COMBINED_ORDER_WIDGET"] div[style*="color: rgb(255, 212, 80)"]'
        )
        .closest('[data-widget-type="COMBINED_ORDER_WIDGET"]'),
      data.t
    );
  });
})();
```

